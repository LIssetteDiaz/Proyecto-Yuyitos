{% extends 'layout.html' %}
{% load static %}
{% load widget_tweaks %}

{% block content %}
<link rel="stylesheet" href="{% static 'css/informes.css' %}">
<h1 class="text-center p-3">Crear Informe de productos</h1>
<form method="post" action="" class="">
    {% csrf_token %}
    <div class="container border border-primary rounded">
        <label for="productos" class="p-2">Productos:</label>
        <input type="checkbox" class="productos" name="productos" id="productos" onclick="checkeado(this.form)"/></br>
            
        <div class="row row-cols-5">
            
            <div class="col border border-primary rounded">
                
                <label for="productos" class="p-2">Nombre:</label>
                <input type="checkbox" class="nombre" name="nombre" id="nombre"/></br>

                <label for="productos" class="p-2">Precio:</label>
                <input type="checkbox" class="precio" name="precio" id="precio"/></br>

                <label for="productos" class="p-2">Descripcion:</label>
                <input type="checkbox" class="descripcion" name="descripcion" id="descripcion"/></br>

                <label for="productos" class="p-2">Precio compra:</label>
                <input type="checkbox" class="precioCompra" name="precioCompra" id="precioCompra"/></br>

                <label for="productos" class="p-2">Stock Critico:</label>
                <input type="checkbox" class="stockCritico" name="stockCritico" id="stockCritico"/></br>

                <label for="productos" class="p-2">Fecha vencimiento:</label>
                <input type="checkbox" class="fechaVencimiento" name="fechaVencimiento" id="fechaVencimiento"/></br>

                <label for="productos" class="p-2">Codigo barra:</label>
                <input type="checkbox" class="codigoBarra" name="codigoBarra" id="codigoBarra"/>
            </div>

            <div class="col border border-primary rounded">
                <label for="productos" class="p-2">Stock:</label>
                <input type="checkbox" class="stock" name="stock" id="stock" onclick="checkeado(this.form)"/></br></br>
                <input type="radio" name="stockCheck" value="todos" id="stockCheck1" checked> Todos</br></br>
                <input type="radio" name="stockCheck" value="conStock" id="stockCheck2"> Con stock</br></br>
                <input type="radio" name="stockCheck" value="sinStock" id="stockCheck3"> Sin stock</br></br>
            </div>

            <div class="col border border-primary rounded">
                <label for="productos" class="p-2">Estado del producto:</label>
                <input type="checkbox" class="estado" name="estado" id="estado" onclick="checkeado(this.form)"/></br></br>
                <input type="radio" name="estadoCheck" value="todos" id="estadoCheck1" checked>Todos</br></br>
                <input type="radio" name="estadoCheck" value="disponible" id="estadoCheck2"> Disponible</br></br>
                <input type="radio" name="estadoCheck" value="noDisponible" id="estadoCheck3"> No disponible</br></br>
            </div>

            <div class="col border border-primary rounded">
                <label for="productos" class="p-2">Familia producto:</label>
                <input type="checkbox" class="familiaProducto" name="familiaProducto" id="familiaProducto" onclick="checkeado(this.form)"/></br></br>
                <input type="radio" name="familiaProductoCheck" value="todosF" id="familiaProductoCheck1" checked onclick="checkeado(this.form)"> Todos</br></br>
                <input type="radio" name="familiaProductoCheck" value="porNombreF" id="familiaProductoCheck2" onclick="checkeado(this.form)"> Por nombrev
                {{ formP.familia_producto }}
            </div>

            <div class="col border border-primary rounded">
                <label for="productos" class="p-2">Tipo producto:</label>
                <input type="checkbox" class="tipoProducto" name="tipoProducto" id="tipoProducto" onclick="checkeado(this.form)"/></br></br>
                <input type="radio" name="tipoProductoCheck" value="todosT" id="tipoProductoCheck1" checked onclick="checkeado(this.form)"> Todos</br></br>
                <input type="radio" name="tipoProductoCheck" value="porNombreT" id="tipoProductoCheck2" onclick="checkeado(this.form)"> Por nombre</br></br>
                {{ formT.tipo_producto }}
            </div>
                
        </div>
    </div>
    <!-- seguimiento pagina -->
    <div class="container border border-primary rounded mt-3">
        <label for="productos" class="p-2">Visitas a paginas:</label>
        <input type="checkbox" class="visitas" name="visitas" id="visitas" onclick="checkeado(this.form)"/></br>
        
        <div class="row row-cols-2">

            <div class="col border border-primary rounded">
                <label for="productos" class="p-2">Usuario:</label>
                <input type="checkbox" class="usuarioPaginaVisitada" name="usuarioPaginaVisitada" id="usuarioPaginaVisitada" onclick="checkeado(this.form)"/></br></br>
                <input type="radio" name="usuarioVisitasPaginaCheck" value="todosVisitasP" id="usuarioVisitasPaginaCheck1" checked onclick="checkeado(this.form)"> Todos</br></br>
                <input type="radio" name="usuarioVisitasPaginaCheck" value="porNombreVisitasP" id="usuarioVisitasPaginaCheck2" onclick="checkeado(this.form)"> Por nombre</br>
                {{ FormSeg.usuario }} 
                </br></br>
            </div>
            
            <div class="col border border-primary rounded">
                </br>
                <label for="productos" class="p-2">Fecha ingreso:</label>
                <input type="checkbox" class="fechaVisitasP" name="fechaVisitasP" id="fechaVisitasP"/></br>

                <label for="productos" class="p-2">Pagina visitada:</label>
                <input type="checkbox" class="paginaVisitada" name="paginaVisitada" id="paginaVisitada"/></br>
            </div>
    
        </div>
    
    </div>
    <div class="container p-3">
        <div class="row">
            <div class="col-md-2">
            </div>

            <div class="col-md-4 text-center border border-dark rounded">
                <br>
                <label for="">Exportar a documento tipo:</label></br></br>
                <input type="radio" name="informeCheck" value="informeExcel" id="informeCheck1" onclick="checkeado(this.form)"> Excel</br></br>
                <input type="radio" name="informeCheck" value="informeWord" id="informeCheck2" onclick="checkeado(this.form)"> Word</br></br>
                <input type="radio" name="informeCheck" value="informePdf" id="informeCheck3" onclick="checkeado(this.form)"> PDF</br><br>
            </div>

            <div class="col-md-4 text-center border border-dark rounded">
                <br>
                <label for="">Para descargar el informe debe seleccionar un formato de documento, para obtener una vista previa del informe solo se puede en formato PDF:</label></br></br>
                <button type="submit" name="vistaPrevia" value="vistaPrevia" id="vistaPrevia" class="btn btn-primary">Vista previa</button><br><br>
                <button type="submit" name="descargarInforme" value="descargarInforme" id="descargarInforme" class="btn btn-primary">Descargar</button><br><br>
            </div>

            <div class="col-md-2">
            </div>
        </div>
    </div>

</form>

<script language="JavaScript">
   
    document.getElementById("precio").disabled=true;
    document.getElementById("descripcion").disabled=true;
    document.getElementById("precioCompra").disabled=true;
    document.getElementById("stockCritico").disabled=true;
    document.getElementById("fechaVencimiento").disabled=true;
    document.getElementById("codigoBarra").disabled=true;
    document.getElementById("stock").disabled=true;
    document.getElementById("nombre").disabled=true;
    
    document.getElementById("estado").disabled=true;
    
    document.getElementById("familiaProducto").disabled=true;
    document.getElementById("id_familia_producto").disabled=true;

    document.getElementById("familiaProductoCheck1").disabled=true;
    document.getElementById("familiaProductoCheck2").disabled=true;

    document.getElementById("stockCheck1").disabled=true;
    document.getElementById("stockCheck2").disabled=true;
    document.getElementById("stockCheck3").disabled=true;

    document.getElementById("estadoCheck1").disabled=true;
    document.getElementById("estadoCheck2").disabled=true;
    document.getElementById("estadoCheck3").disabled=true;

    document.getElementById("tipoProducto").disabled=true;
    document.getElementById("tipoProductoCheck1").disabled=true;
    document.getElementById("tipoProductoCheck2").disabled=true;
    document.getElementById("id_tipo_producto").disabled=true;

    document.getElementById("usuarioPaginaVisitada").disabled=true;
    document.getElementById("usuarioVisitasPaginaCheck1").disabled=true;
    document.getElementById("usuarioVisitasPaginaCheck2").disabled=true;
    document.getElementById("id_visitas_pagina").disabled=true;
    document.getElementById("fechaVisitasP").disabled=true;
    document.getElementById("paginaVisitada").disabled=true;
    
    document.getElementById("descargarInforme").disabled=true;
    document.getElementById("vistaPrevia").disabled=true;

    document.getElementById("informeCheck1").disabled=true;
    document.getElementById("informeCheck2").disabled=true;
    document.getElementById("informeCheck3").disabled=true;


    
    function checkeado(form)
    {
        if (form.productos.checked == true)
        {
            form.precio.disabled = false;
            form.descripcion.disabled = false;
            form.precioCompra.disabled = false;
            form.stockCritico.disabled = false;
            form.fechaVencimiento.disabled = false;
            form.codigoBarra.disabled = false;
            form.stock.disabled = false;
            form.estado.disabled = false;
            form.familiaProducto.disabled = false;
            form.tipoProducto.disabled = false;
            form.nombre.disabled = false;
            form.informeCheck1.disabled = false;
            form.informeCheck2.disabled = false;
            form.informeCheck3.disabled = false;
        }

        if (form.productos.checked == false)
        {
            form.precio.disabled = true;
            form.descripcion.disabled = true;
            form.precioCompra.disabled = true;
            form.stockCritico.disabled = true;
            form.fechaVencimiento.disabled = true;
            form.codigoBarra.disabled = true;
            form.stock.disabled = true;
            form.estado.disabled = true;
            form.familiaProducto.disabled = true;
            form.nombre.disabled = true;
            form.informeCheck1.disabled = true;
            form.informeCheck2.disabled = true;
            form.informeCheck3.disabled = true;
            
        }

        if (form.stock.checked == true){
            
            form.stockCheck1.disabled = false;
            form.stockCheck2.disabled = false;
            form.stockCheck3.disabled = false;
        }

        if (form.stock.checked == false || form.stock.disabled == true){
            form.stockCheck1.disabled = true;
            form.stockCheck2.disabled = true;
            form.stockCheck3.disabled = true;
        }

        if (form.estado.checked == true){
            
            form.estadoCheck1.disabled = false;
            form.estadoCheck2.disabled = false;
            form.estadoCheck3.disabled = false;
        }

        if (form.estado.checked == false || form.estado.disabled == true){
            form.estadoCheck1.disabled = true;
            form.estadoCheck2.disabled = true;
            form.estadoCheck3.disabled = true;
        }
        

        if (form.familiaProducto.checked == true){
            
            form.familiaProductoCheck1.disabled = false;
            form.familiaProductoCheck2.disabled = false;
        }

        if (form.familiaProducto.checked == false || form.familiaProducto.disabled == true){
            form.familiaProductoCheck1.disabled = true;
            form.familiaProductoCheck2.disabled = true;
        }

        if (form.familiaProductoCheck2.checked == true){
            form.id_familia_producto.disabled = false;
        }

        if (form.familiaProductoCheck1.checked == true){
            form.id_familia_producto.disabled = true;
        }

        
        if (form.tipoProducto.checked == true){
            
            form.tipoProductoCheck1.disabled = false;
            form.tipoProductoCheck2.disabled = false;
        }

        if (form.tipoProducto.checked == false || form.tipoProducto.disabled == true){
            form.tipoProductoCheck1.disabled = true;
            form.tipoProductoCheck2.disabled = true;
        }

        if (form.tipoProductoCheck2.checked == true){
            form.id_tipo_producto.disabled = false;
        }

        if (form.tipoProductoCheck1.checked == true){
            form.id_tipo_producto.disabled = true;
        }

        //visitas
        if (form.visitas.checked == true){
            
            form.usuarioPaginaVisitada.disabled = false;
            form.fechaVisitasP.disabled = false;
            form.paginaVisitada.disabled = false;
        }

        if (form.visitas.checked == false || form.visitas.disabled == true){
            form.usuarioPaginaVisitada.disabled = true;
            form.fechaVisitasP.disabled = true;
            form.paginaVisitada.disabled = true;
            
        }
        //
        if (form.usuarioPaginaVisitada.checked == true){
            
            form.usuarioVisitasPaginaCheck1.disabled = false;
            form.usuarioVisitasPaginaCheck2.disabled = false;
            
        }

        if (form.usuarioPaginaVisitada.checked == false || form.usuarioPaginaVisitada.disabled == true){
            form.usuarioVisitasPaginaCheck1.disabled = true;
            form.usuarioVisitasPaginaCheck2.disabled = true;
            
        }

        if (form.usuarioVisitasPaginaCheck2.checked == true){
            form.id_visitas_pagina.disabled = false;
        }

        if (form.usuarioVisitasPaginaCheck1.checked == true){
            form.id_visitas_pagina.disabled = true;
        }


        //informes

        if (form.informeCheck3.checked == true ){
            form.descargarInforme.disabled = false;
            form.vistaPrevia.disabled = false;
        }

        if (form.informeCheck1.checked == true || form.informeCheck2.checked == true){
            form.descargarInforme.disabled = false;
        }

        if (form.informeCheck1.checked == true || form.informeCheck2.checked == true){
            form.vistaPrevia.disabled = true;
        }
    }
    
    
</script>
<!-- <script src="{% static 'js/informe.js' %}"></script> -->
{% endblock %}